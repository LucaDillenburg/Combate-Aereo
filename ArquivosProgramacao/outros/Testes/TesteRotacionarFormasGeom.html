<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <!-- bibliotecas do P5 -->
    <script src="../../Javascript/p5/p5.min.js"></script>
    <script src="../../Javascript/p5/addons/p5.dom.min.js"></script>
    <script src="../../Javascript/p5/addons/p5.sound.min.js"></script>

    <!-- classes auxiliares geometria -->
    <script src="../../Javascript/Geometria/GeometriaBasica.js"></script>
    <script src="../../Javascript/Geometria/FormasGeometricas.js"></script>
  </head>
  <body>
    Angulo: <input type="text" id="angulo"> <button id="btn" onclick="clickBnt()">rotacionar</button>
    <br>

    <script type="text/javascript" onload="setup()">
      let formasGeom = [], vertices = [];
      const nLados = 8;

      let centroRotacao;// = new Ponto(250, 250);

      function clickBnt()
      {
        const qtd = formasGeom.length;

        formasGeom[qtd] = formasGeom[qtd-1].clone();
        let angulo = document.getElementById("angulo").value*PI/180;

        formasGeom[qtd] = formasGeom[qtd].rotacionar(angulo, centroRotacao);

        let cor;
        switch (formasGeom.length%6)
        {
          case 0: cor = "brown"; break;
          case 1: cor = "green"; break;
          case 2: cor = "blue"; break;
          case 3: cor = "yellow"; break;
          case 4: cor = "red"; break;
          case 5: cor = "white"; break;
        }
        formasGeom[qtd].corImg = {fill: cor};
      }

const testando = false;
const heightVidaUsuario = 0;

      function setup()
      {
        createCanvas(500,500);

        document.getElementById("defaultCanvas0").addEventListener("click", function()
          {
            if (vertices.length == nLados)
            {
              console.log(new Ponto(mouseX, mouseY));
              return;
            }

            vertices[vertices.length] = new Ponto(mouseX, mouseY);

            if (vertices.length == nLados)
            {
              formasGeom = [];

              formasGeom[0] = new FormaGeometricaComposta(0,0,
                [
                  new Quadrilatero(vertices[0], vertices[1],
                    vertices[2], vertices[3]),
                  new Quadrilatero(vertices[4], vertices[5],
                    vertices[6], vertices[7]),
                ], {fill: "green"});
            }
          });
      }

      function draw()
      {
        background(0);
        formasGeom.forEach(formaGeom => formaGeom.draw());

        if (centroRotacao !== undefined)
        {
          let tam = 20;
          //if (formasGeom.length>1)
            //tam = Operacoes.hipotenusa(formasGeom[formasGeom.length-2].vertices[3].x - formasGeom[formasGeom.length-1].vertices[1].x,
          //    formasGeom[formasGeom.length-2].vertices[3].y - formasGeom[formasGeom.length-1].vertices[1].y);
          fill("white");
          ellipse(centroRotacao.x, centroRotacao.y,tam,tam);
          fill("blue");
          ellipse(centroRotacao.x, centroRotacao.y, 5,5);
        }

        // if (formasGeom.length > 0)
        // {
        //   fill(0);
        //   ellipse(formasGeom[0].centroMassa.x, formasGeom[0].centroMassa.y,
        //     formasGeom[0].width*0.6, formasGeom[0].width*0.6);
        // }
      }
    </script>
  </body>
</html>
